---
title: "My title"
subtitle: "My subtitle if needed"
author: 
  - Hyunje Park
thanks: "Code and data are available at: [https://github.com/davidpxrk/childrens-book-rating](https://github.com/davidpxrk/childrens-book-rating). Special thanks to Rohan Alexander for his help!"
date: today
date-format: long
abstract: "This paper examines the rating of childrens' books using the . By using logistic regression and data from the Alex Cookson (CITATION), I analyzed the relationship between various characteristics of a childrens' book, and whether or not it influenced if the book had a high rating or not. The insight from this research not only clarify what makes a high rated childrens' book so high rated, but also enhance future authors to push the boundaries of their literature"
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
library(kableExtra)
library(arrow)
library(readr)
library(rstanarm)
library(modelsummary)

data <- read_parquet(here::here("data/analysis_data/analysis_data.parquet"))
```


# Introduction

For generations, children's books have been a catalyst in children's development. Through captivating fairytales and fables of stories about adventures, heroes, magical forests and magic, children gain experiences on feelings and thoughts, learning to cope with inhibitions, vulnerability and shyness (CITATION). Beyond educational purposes, children's literature can positively influence mental wellbeing, feelings and behavior. Given these significant developmental benefits, it can be said that the quality of the children's book matters greatly; choosing a well-written book can affect how it nurtures the next generation of mature, emotionally resilient individuals. This is why book rating systems hold significant importance; allowing readers to rate books on a scale from 0-5 scale (most commonly used scale) helps parents and educators assess whether a book is worth giving to children.

In this 0-5 rating system, a score of 4 or above is often seen as the benchmark for a "highly rated" book. This is influenced by central tendency bias, where people naturally gravitate towards a moderate score, avoiding extremes like 0 or 5 to appear more balanced and objective. A rating such as 4, in particular, suggests a strong endorsement without overstepping into exaggeration. Given this, a critical question arises; What factors of a book contribute to the likelihood of the book being "highly rated"?

In this paper, I analyzed how the characteristics of a book, such as book type, page count, publishing year, and rating counts affected the likelihood of a book being "highly-rated", using the Children's Book Ratings Data (CITATION). First, after data cleaning, I selected 9 variables on children book characteristics for my analysis in (SECTION 2). Then, a logistic regression model was created to predict the probability of the book being "highly-rated", based on the chosen book characteristic variables. 

The logistic regression model showed that ___ The findings of this research have practical implications for the writing industry, to allow future generation authors to push the boundaries of literature.

This research paper is structured as follows: (SECTION 2) contains an overview of the dataset and some tables and graphs used to illustrate the variables employed in this analysis. (SECTION 3) describes and justifies the logistic regression model that was produced in this report. (SECTION 4) highlights the result of the model, (SECTION 5) discusses some of the outcomes, weaknesses, and (SECTION APPENDIX) contains additional information on model details. 


# Estimand

# Model

# Results

# Discussion

# Appendix





```{r}
#| label: cleaned_dataset-preview
#| fig-cap: "Preview of the Cleaned Dataset"
#| echo: false

# TABLE 1: CLEANED DATASET
data %>% head(5)
```


```{r}
#| label: summary_statistic_cleaned_dataset
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false

data %>% 
  select(-c(title)) %>% 
  summary(rated-high) %>% 
  kable(booktabs = TRUE, linesep = "") %>% 
  kable_styling(position = "left", bootstrap_options = "condensed", full_width = FALSE)


```


# Data {#sec-data}

```{r}
#| label: summary_statistic_cleaned_dataset2
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false


data2 <- data %>% filter(rating > 4 )

ggplot(data2, aes(x = publish_year, y = rating)) +
  geom_point() +
  theme_minimal()


ggplot(data2, aes(x = rating, y = rating_count)) +
  geom_point() +
  geom_smooth( se =FALSE, color = "red", size = 1)

ggplot(data2, aes(x = rating, y = pages)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, color = 'red', size = 1)

ggplot(data2, aes(y = cover)) + 
  geom_bar() +
  theme_minimal()


avg_pages <- aggregate(pages ~ rated_high, data = data, FUN = mean, na.rm = TRUE)


ggplot(avg_pages, aes(x = factor(rated_high), y = pages, fill = factor(rated_high))) +
  geom_bar(stat = "identity") +
  labs(
    title = "Average Pages by High Rated",
    x = "High Rated (1 = Yes, 0 = No)",
    y = "Average Pages",
    fill = "High Rated"
  ) +
  theme_minimal()


cover_counts <- data %>%
  group_by(rated_high, cover) %>%
  summarise(count = n()) %>%
  ungroup()

ggplot(cover_counts, aes(x = cover, y = count, fill = cover)) +
  geom_bar(stat = "identity", position = "dodge") +
  facet_wrap(~ rated_high) +
  labs(title = "Count of Hardcover and Paperback by Rated High",
       x = "Cover Type",
       y = "Count") +
  theme_minimal()




```



\newpage
```{r}
#| label: summary_statistic_cleaned_dataset3
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false

model_file <- readRDS(file = here::here("models/model.rds"))

modelsummary(
  list (
    "Book is High-Rated" = model_file
  ),
  statistic = "mad"
)

```

```{r}
#| label: summary_statistic_cleaned_dataset4
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false

pp_check(model_file) +
  theme(legend.position = "bottom")


```

```{r}
#| label: summary_statistic_cleaned_dataset5
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false

posterior_vs_prior(model_file, size = 0.3) +
   theme_minimal() +
   theme(legend.position = "bottom") +
   theme(axis.text.x=element_text(hjust=1, vjust=0.5),
         text=element_text(size=8)) +
   coord_flip()

```


```{r}
#| label: summary_statistic_cleaned_dataset6
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false
#| fig-subcap: ["Intercept", "pages", "rating_count", "publish_year", "coverEbook", "coverKindle", "coverBoard", "coverHardcover", "coverPaperback"]
#| layout-ncol: 3

plot(model_file, "trace", "(Intercept)")
plot(model_file, "trace", "pages")
plot(model_file, "trace", "rating_count")
plot(model_file, "trace", "publish_year")
plot(model_file, "trace", "coverEbook")
plot(model_file, "trace", "coverKindle Edition")
plot(model_file, "trace", "coverBoard Book")
plot(model_file, "trace", "coverHardcover")
plot(model_file, "trace", "coverPaperback")


```



```{r}
#| label: summary_statistic_cleaned_dataset7
#| fig-cap: "Summary Statistic of the Cleaned Dataset"
#| echo: false

plot(model_file, "rhat")

```
# References


